# Toolchain Writer — Spec v0.7

## Overview

Serializes `DetectionResult` into TOML format for `.anima/toolchain.toml`.

## TOML Format

```toml
# Generated by anima init — edit freely.

[[toolchain]]
path = "."
stack = "python"
lint = "ruff check ."
typecheck = "pyright"
test = "pytest"
coverage = "pytest --cov"

[[toolchain]]
path = "frontend/"
stack = "node"
lint = "eslint ."
typecheck = "tsc --noEmit"
test = "npm test"
coverage = ""
```

## Functions

### `generate_toml(result: DetectionResult) -> str`

1. If `result.entries` is empty, return only the header comment.
2. For each entry, emit a `[[toolchain]]` section with all six fields.
3. Sections are separated by a blank line.
4. String values are double-quoted.
5. Returns the complete TOML string (with trailing newline).

### `write_toolchain(result: DetectionResult, anima_dir: str) -> str`

1. Call `generate_toml(result)` to produce the content.
2. Create `anima_dir` if it does not exist (`mkdir -p` equivalent).
3. Write content to `<anima_dir>/toolchain.toml` (UTF-8).
4. Return the absolute path of the written file.
