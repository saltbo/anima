# v0.4 — Executor (resilient agent integration)

The most complex and impactful module. Replace the bare subprocess call
with a robust, self-aware agent integration.

**Seed MVP (what exists today):**
- execute_plan: bare subprocess.Popen to `claude --print`, basic NDJSON streaming,
  no error recovery, no rate limit handling, minimal output formatting

**Module targets (what the agent builds — must exceed seed):**
- Rate limit detection: parse API error responses, detect 429/quota exhaustion
- Auto-retry with exponential backoff on transient failures
- Structured output parsing: extract tool calls, results, cost per step
- Better streaming display: progress indicators, tool call summaries
- AgentPort abstraction via adapters/agents/claude_code.py
- Cost tracking per tool call (not just per iteration)

- [ ] Implement adapters/agents/claude_code.py (ClaudeCodeAdapter implements AgentPort)
- [ ] Implement modules/executor/core.py with retry logic and structured output
- [ ] Tests for executor validating SPEC.md (with mock AgentPort)
- [ ] Wire execute_plan into wiring.py with conformance test
- [ ] All code passes full quality pipeline
